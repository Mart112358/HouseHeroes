<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="HouseHeroes.Mobile.Views.LoginPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:HouseHeroes.Mobile.ViewModels"
             x:DataType="viewmodels:LoginViewModel"
             Title="House Heroes - Sign In"
             Shell.NavBarIsVisible="False">
    <ScrollView>
        <StackLayout Padding="30" Spacing="25" VerticalOptions="Center">
            
            <!-- App Logo/Title -->
            <Label Text="ðŸ " 
                   FontSize="80" 
                   HorizontalOptions="Center" />
            
            <Label Text="House Heroes" 
                   FontSize="32" 
                   FontAttributes="Bold"
                   HorizontalOptions="Center" 
                   TextColor="{StaticResource Primary}" />
            
            <Label Text="Family Task Management" 
                   FontSize="18" 
                   HorizontalOptions="Center"
                   TextColor="{StaticResource Gray600}" />

            <!-- Spacing -->
            <BoxView HeightRequest="20" Color="Transparent" />

            <!-- Welcome Message -->
            <Label Text="Welcome! Sign in to your existing account or create a new one to start managing your family's tasks together."
                   FontSize="16"
                   HorizontalOptions="Center"
                   HorizontalTextAlignment="Center"
                   TextColor="{StaticResource Gray900}"
                   IsVisible="{Binding IsSignedIn, Converter={StaticResource InvertedBoolConverter}}" />

            <!-- Status Message -->
            <Label Text="{Binding StatusMessage}"
                   FontSize="14"
                   HorizontalOptions="Center"
                   HorizontalTextAlignment="Center"
                   TextColor="{StaticResource Primary}"
                   IsVisible="{Binding StatusMessage, Converter={StaticResource StringToBoolConverter}}" />

            <!-- Sign In Section (when not signed in) -->
            <StackLayout IsVisible="{Binding IsSignedIn, Converter={StaticResource InvertedBoolConverter}}"
                        Spacing="15">
                
                <Button Text="Sign In or Create Account"
                        Command="{Binding SignInCommand}"
                        IsEnabled="{Binding IsSigningIn, Converter={StaticResource InvertedBoolConverter}}"
                        BackgroundColor="{StaticResource Primary}"
                        TextColor="White"
                        FontSize="18"
                        FontAttributes="Bold"
                        HeightRequest="50"
                        CornerRadius="25" />

                <Label Text="New to House Heroes? No problem! Click above to create your account."
                       FontSize="14"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center"
                       TextColor="{StaticResource Gray600}" />

                <ActivityIndicator IsRunning="{Binding IsSigningIn}"
                                 IsVisible="{Binding IsSigningIn}"
                                 Color="{StaticResource Primary}"
                                 HeightRequest="30" />
                
                <Label Text="Signing in..."
                       FontSize="14"
                       HorizontalOptions="Center"
                       TextColor="{StaticResource Gray600}"
                       IsVisible="{Binding IsSigningIn}" />
                       
            </StackLayout>

            <!-- Signed In Section -->
            <StackLayout IsVisible="{Binding IsSignedIn}" 
                        Spacing="15">
                
                <Frame BackgroundColor="{StaticResource Gray100}"
                       BorderColor="{StaticResource Gray300}"
                       CornerRadius="10"
                       Padding="20">
                    <StackLayout>
                        <Label Text="âœ“ Successfully signed in"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Success}"
                               HorizontalOptions="Center" />
                        
                        <Label Text="{Binding UserDisplayName, StringFormat='Welcome, {0}!'}"
                               FontSize="14"
                               HorizontalOptions="Center"
                               TextColor="{StaticResource Gray700}" />
                    </StackLayout>
                </Frame>

                <Button Text="Continue to App"
                        Clicked="OnContinueToMainClicked"
                        BackgroundColor="{StaticResource Success}"
                        TextColor="White"
                        FontSize="18"
                        FontAttributes="Bold"
                        HeightRequest="50"
                        CornerRadius="25" />

                <Button Text="Sign Out"
                        Command="{Binding SignOutCommand}"
                        BackgroundColor="Transparent"
                        TextColor="{StaticResource Gray600}"
                        FontSize="14"
                        HeightRequest="40" />
                        
            </StackLayout>

            <!-- Features Preview -->
            <StackLayout IsVisible="{Binding IsSignedIn, Converter={StaticResource InvertedBoolConverter}}"
                        Spacing="10"
                        Margin="0,30,0,0">
                        
                <Label Text="Features"
                       FontSize="18"
                       FontAttributes="Bold"
                       TextColor="{StaticResource Gray800}"
                       HorizontalOptions="Center" />

                <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" 
                      ColumnSpacing="20" RowSpacing="15">
                    
                    <Frame Grid.Row="0" Grid.Column="0" 
                           BackgroundColor="{StaticResource Gray50}"
                           BorderColor="{StaticResource Gray200}"
                           CornerRadius="8" Padding="15">
                        <StackLayout>
                            <Label Text="ðŸ“‹" FontSize="24" HorizontalOptions="Center" />
                            <Label Text="Task Management" FontSize="12" FontAttributes="Bold" HorizontalOptions="Center" />
                            <Label Text="Create and assign tasks" FontSize="10" HorizontalOptions="Center" TextColor="{StaticResource Gray600}" />
                        </StackLayout>
                    </Frame>

                    <Frame Grid.Row="0" Grid.Column="1" 
                           BackgroundColor="{StaticResource Gray50}"
                           BorderColor="{StaticResource Gray200}"
                           CornerRadius="8" Padding="15">
                        <StackLayout>
                            <Label Text="ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦" FontSize="24" HorizontalOptions="Center" />
                            <Label Text="Family Shared" FontSize="12" FontAttributes="Bold" HorizontalOptions="Center" />
                            <Label Text="Everyone stays organized" FontSize="10" HorizontalOptions="Center" TextColor="{StaticResource Gray600}" />
                        </StackLayout>
                    </Frame>

                    <Frame Grid.Row="1" Grid.Column="0" 
                           BackgroundColor="{StaticResource Gray50}"
                           BorderColor="{StaticResource Gray200}"
                           CornerRadius="8" Padding="15">
                        <StackLayout>
                            <Label Text="ðŸ””" FontSize="24" HorizontalOptions="Center" />
                            <Label Text="Notifications" FontSize="12" FontAttributes="Bold" HorizontalOptions="Center" />
                            <Label Text="Never miss a task" FontSize="10" HorizontalOptions="Center" TextColor="{StaticResource Gray600}" />
                        </StackLayout>
                    </Frame>

                    <Frame Grid.Row="1" Grid.Column="1" 
                           BackgroundColor="{StaticResource Gray50}"
                           BorderColor="{StaticResource Gray200}"
                           CornerRadius="8" Padding="15">
                        <StackLayout>
                            <Label Text="ðŸ“±" FontSize="24" HorizontalOptions="Center" />
                            <Label Text="Cross-Platform" FontSize="12" FontAttributes="Bold" HorizontalOptions="Center" />
                            <Label Text="Works everywhere" FontSize="10" HorizontalOptions="Center" TextColor="{StaticResource Gray600}" />
                        </StackLayout>
                    </Frame>
                    
                </Grid>
            </StackLayout>
            
        </StackLayout>
    </ScrollView>
</ContentPage>